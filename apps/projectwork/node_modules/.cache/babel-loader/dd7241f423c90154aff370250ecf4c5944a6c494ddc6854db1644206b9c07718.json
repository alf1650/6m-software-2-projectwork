{"ast":null,"code":"var _jsxFileName = \"/Users/jax/Desktop/sctp-projects/6m-software-2-projectwork/apps/projectwork/src/components/CurrencyConverter.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport converterAPI from \"../api/converterAPI\";\nimport useUserState from \"../store/userStateContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CurrencyConverter() {\n  _s();\n  const {\n    userCurrency,\n    selectedCountry\n  } = useUserState();\n  const [convertedAmount, setConvertedAmount] = useState(\"1\");\n  const [nativeCurrency, setNativeCurrency] = useState(\"\");\n  const [nativeCurrencyName, setNativeCurrencyName] = useState(\"\");\n  const [isCurrencyLoading, setIsCurrencyLoading] = useState(false);\n  const API_KEYS_ARRAY = process.env.REACT_APP_API_KEY.split(\" \");\n  const CONVERTER_API_KEY = API_KEYS_ARRAY[1];\n  useEffect(() => {\n    const fetchNativeCurrency = async () => {\n      //fetch selected country's native currency\n      try {\n        const response = await converterAPI.get(\"/country\", {\n          headers: {\n            \"X-Api-Key\": CONVERTER_API_KEY\n          },\n          params: {\n            name: `${selectedCountry.code}`\n          }\n        });\n        if (response.data[0].currency) {\n          return response.data[0].currency;\n        }\n        return;\n      } catch (error) {\n        console.error(\"Error fetching currency:\", error);\n      }\n    };\n    const fetchConvertedAmount = async fetchedCurrencyCode => {\n      //fetch converted amount from $1 user currency to selected country's native currency\n      try {\n        const response = await converterAPI.get(\"/convertcurrency\", {\n          headers: {\n            \"X-Api-Key\": CONVERTER_API_KEY\n          },\n          params: {\n            want: `${fetchedCurrencyCode}`,\n            have: `${userCurrency}`,\n            amount: 1\n          }\n        });\n        return response.data.new_amount;\n      } catch (error) {\n        console.error(\"Error fetching currency:\", error);\n      }\n    };\n    const currencyConversion = async () => {\n      setIsCurrencyLoading(true);\n      const fetchedCurrency = await fetchNativeCurrency();\n      if (fetchedCurrency === undefined) {\n        const convertedAmount = await fetchConvertedAmount(\"USD\");\n        setNativeCurrency(\"USD\");\n        setNativeCurrencyName(\"No native currency found\");\n        setConvertedAmount(convertedAmount);\n        setIsCurrencyLoading(false);\n      } else {\n        const convertedAmount = await fetchConvertedAmount(fetchedCurrency.code);\n        setNativeCurrency(fetchedCurrency.code);\n        setNativeCurrencyName(fetchedCurrency.name);\n        setConvertedAmount(convertedAmount);\n        setIsCurrencyLoading(false);\n      }\n    };\n    currencyConversion();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedCountry, userCurrency]);\n  return /*#__PURE__*/_jsxDEV(\"h4\", {\n    children: isCurrencyLoading ? /*#__PURE__*/_jsxDEV(\"progress\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this) : `1 ${userCurrency} = $ ${convertedAmount} ${nativeCurrency} (${nativeCurrencyName.toUpperCase()})`\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(CurrencyConverter, \"PAj9GYnkaqQD6WIaU7xgEWD0+Ns=\", false, function () {\n  return [useUserState];\n});\n_c = CurrencyConverter;\nexport default CurrencyConverter;\nvar _c;\n$RefreshReg$(_c, \"CurrencyConverter\");","map":{"version":3,"names":["useState","useEffect","converterAPI","useUserState","jsxDEV","_jsxDEV","CurrencyConverter","_s","userCurrency","selectedCountry","convertedAmount","setConvertedAmount","nativeCurrency","setNativeCurrency","nativeCurrencyName","setNativeCurrencyName","isCurrencyLoading","setIsCurrencyLoading","API_KEYS_ARRAY","process","env","REACT_APP_API_KEY","split","CONVERTER_API_KEY","fetchNativeCurrency","response","get","headers","params","name","code","data","currency","error","console","fetchConvertedAmount","fetchedCurrencyCode","want","have","amount","new_amount","currencyConversion","fetchedCurrency","undefined","children","fileName","_jsxFileName","lineNumber","columnNumber","toUpperCase","_c","$RefreshReg$"],"sources":["/Users/jax/Desktop/sctp-projects/6m-software-2-projectwork/apps/projectwork/src/components/CurrencyConverter.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport converterAPI from \"../api/converterAPI\";\nimport useUserState from \"../store/userStateContext\";\n\nfunction CurrencyConverter() {\n  const { userCurrency, selectedCountry } = useUserState();\n  const [convertedAmount, setConvertedAmount] = useState(\"1\");\n  const [nativeCurrency, setNativeCurrency] = useState(\"\");\n  const [nativeCurrencyName, setNativeCurrencyName] = useState(\"\");\n  const [isCurrencyLoading, setIsCurrencyLoading] = useState(false);\n\n  const API_KEYS_ARRAY = process.env.REACT_APP_API_KEY.split(\" \");\n  const CONVERTER_API_KEY = API_KEYS_ARRAY[1];\n\n  useEffect(() => {\n    const fetchNativeCurrency = async () => { //fetch selected country's native currency\n      try {\n        const response = await converterAPI.get(\"/country\", {\n          headers: { \"X-Api-Key\": CONVERTER_API_KEY },\n          params: {\n            name: `${selectedCountry.code}`,\n          },\n        });\n        if (response.data[0].currency) {\n          return response.data[0].currency;\n        }\n        return;\n      } catch (error) {\n        console.error(\"Error fetching currency:\", error);\n      }\n    };\n\n    const fetchConvertedAmount = async (fetchedCurrencyCode) => {\n      //fetch converted amount from $1 user currency to selected country's native currency\n      try {\n        const response = await converterAPI.get(\"/convertcurrency\", {\n          headers: { \"X-Api-Key\": CONVERTER_API_KEY },\n          params: {\n            want: `${fetchedCurrencyCode}`,\n            have: `${userCurrency}`,\n            amount: 1,\n          },\n        });\n        return response.data.new_amount;\n      } catch (error) {\n        console.error(\"Error fetching currency:\", error);\n      }\n    };\n\n    const currencyConversion = async () => {\n      setIsCurrencyLoading(true);\n      const fetchedCurrency = await fetchNativeCurrency();\n\n      if (fetchedCurrency === undefined) {\n        const convertedAmount = await fetchConvertedAmount(\"USD\");\n        setNativeCurrency(\"USD\");\n        setNativeCurrencyName(\"No native currency found\");\n        setConvertedAmount(convertedAmount);\n        setIsCurrencyLoading(false);\n      } else {\n        const convertedAmount = await fetchConvertedAmount(\n          fetchedCurrency.code\n        );\n        setNativeCurrency(fetchedCurrency.code);\n        setNativeCurrencyName(fetchedCurrency.name);\n        setConvertedAmount(convertedAmount);\n        setIsCurrencyLoading(false);\n      }\n    };\n\n    currencyConversion();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedCountry, userCurrency]);\n\n  return (\n    <h4>\n      {isCurrencyLoading ? (\n        <progress />\n      ) : (\n        `1 ${userCurrency} = $ ${convertedAmount} ${nativeCurrency} (${nativeCurrencyName.toUpperCase()})`\n      )}\n    </h4>\n  );\n}\n\nexport default CurrencyConverter;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}