{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alfredlim/sctp/6m-software-2-projectwork/apps/projectwork/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/alfredlim/sctp/6m-software-2-projectwork/apps/projectwork/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/alfredlim/sctp/6m-software-2-projectwork/apps/projectwork/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from\"../css-modules/Map.module.css\";import{useEffect,useState}from\"react\";import{MapContainer,TileLayer,Marker,Popup}from\"react-leaflet\";import{Icon}from\"leaflet\";import\"leaflet/dist/leaflet.css\";import axios from\"axios\";import useUserState from\"../store/userStateContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Map(){var _useUserState=useUserState(),selectedCountry=_useUserState.selectedCountry;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),lat=_useState6[0],setLat=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),lon=_useState8[0],setLon=_useState8[1];useEffect(function(){//fetch co-ordinates of selected country\nvar apiGetCoords=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(false);_context.prev=2;_context.next=5;return axios.get(\"https://geocode.maps.co/search?q=\".concat(selectedCountry.name));case 5:response=_context.sent;if(!response.data[0].lat||!selectedCountry.name){setError(true);}else{setLat(response.data[0].lat);setLon(response.data[0].lon);}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.log(_context.t0.message);case 12:setIsLoading(false);case 13:case\"end\":return _context.stop();}},_callee,null,[[2,9]]);}));return function apiGetCoords(){return _ref.apply(this,arguments);};}();apiGetCoords();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[lat,lon]);var customIcon=new Icon({iconUrl:\"https://cdn-icons-png.flaticon.com/512/447/447031.png\",iconSize:[40,40]});///////////////// error is not working\nreturn/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Location Map\"}),error&&/*#__PURE__*/_jsx(\"h2\",{children:\"No map info found\"}),isLoading?/*#__PURE__*/_jsx(\"progress\",{}):/*#__PURE__*/_jsx(\"div\",{className:styles.map,children:/*#__PURE__*/_jsxs(MapContainer,{center:[lat,lon],zoom:5,scrollWheelZoom:false,children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(Marker,{position:[lat,lon],icon:customIcon,children:/*#__PURE__*/_jsx(Popup,{children:selectedCountry.name})})]})})]});}export default Map;","map":{"version":3,"names":["styles","useEffect","useState","MapContainer","TileLayer","Marker","Popup","Icon","axios","useUserState","jsx","_jsx","jsxs","_jsxs","Map","_useUserState","selectedCountry","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","error","setError","_useState5","_useState6","lat","setLat","_useState7","_useState8","lon","setLon","apiGetCoords","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","name","sent","data","t0","console","log","message","stop","apply","arguments","customIcon","iconUrl","iconSize","className","container","children","map","center","zoom","scrollWheelZoom","attribution","url","position","icon"],"sources":["/Users/alfredlim/sctp/6m-software-2-projectwork/apps/projectwork/src/components/Map.jsx"],"sourcesContent":["import styles from \"../css-modules/Map.module.css\";\nimport { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup } from \"react-leaflet\";\nimport { Icon } from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport axios from \"axios\";\nimport useUserState from \"../store/userStateContext\";\n\nfunction Map() {\n  const { selectedCountry } = useUserState();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [lat, setLat] = useState(\"\");\n  const [lon, setLon] = useState(\"\");\n\n  useEffect(() => { //fetch co-ordinates of selected country\n    const apiGetCoords = async () => {\n      setIsLoading(true);\n      setError(false);\n      try {\n        const response = await axios.get(\n          `https://geocode.maps.co/search?q=${selectedCountry.name}`\n        );\n        if (!response.data[0].lat || !selectedCountry.name) {\n          setError(true);\n        } else {\n          setLat(response.data[0].lat);\n          setLon(response.data[0].lon);\n        }\n      } catch (error) {\n        console.log(error.message);\n      }\n      setIsLoading(false);\n    };\n    apiGetCoords();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [lat, lon]);\n\n  const customIcon = new Icon({\n    iconUrl: \"https://cdn-icons-png.flaticon.com/512/447/447031.png\",\n    iconSize: [40, 40],\n  });\n  ///////////////// error is not working\n  return (\n    <div className={styles.container}>\n      <h1>Location Map</h1>\n      {error && <h2>No map info found</h2>}\n      {isLoading ? (\n        <progress />\n      ) : (\n        <div className={styles.map}>\n          <MapContainer center={[lat, lon]} zoom={5} scrollWheelZoom={false}>\n            <TileLayer\n              attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            />\n            <Marker position={[lat, lon]} icon={customIcon}>\n              <Popup>{selectedCountry.name}</Popup>\n            </Marker>\n          </MapContainer>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Map;\n"],"mappings":"kdAAA,MAAO,CAAAA,MAAM,KAAM,+BAA+B,CAClD,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,YAAY,CAAEC,SAAS,CAAEC,MAAM,CAAEC,KAAK,KAAQ,eAAe,CACtE,OAASC,IAAI,KAAQ,SAAS,CAC9B,MAAO,0BAA0B,CACjC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAErD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,IAAAC,aAAA,CAA4BN,YAAY,CAAC,CAAC,CAAlCO,eAAe,CAAAD,aAAA,CAAfC,eAAe,CACvB,IAAAC,SAAA,CAAkCf,QAAQ,CAAC,KAAK,CAAC,CAAAgB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA1CG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAA0BpB,QAAQ,CAAC,KAAK,CAAC,CAAAqB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAlCE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAAsBxB,QAAQ,CAAC,EAAE,CAAC,CAAAyB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA3BE,GAAG,CAAAD,UAAA,IAAEE,MAAM,CAAAF,UAAA,IAClB,IAAAG,UAAA,CAAsB5B,QAAQ,CAAC,EAAE,CAAC,CAAA6B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA3BE,GAAG,CAAAD,UAAA,IAAEE,MAAM,CAAAF,UAAA,IAElB9B,SAAS,CAAC,UAAM,CAAE;AAChB,GAAM,CAAAiC,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACnBxB,YAAY,CAAC,IAAI,CAAC,CAClBI,QAAQ,CAAC,KAAK,CAAC,CAACkB,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAES,CAAArC,KAAK,CAACsC,GAAG,qCAAAC,MAAA,CACM/B,eAAe,CAACgC,IAAI,CAC1D,CAAC,QAFKR,QAAQ,CAAAG,QAAA,CAAAM,IAAA,CAGd,GAAI,CAACT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC,CAACtB,GAAG,EAAI,CAACZ,eAAe,CAACgC,IAAI,CAAE,CAClDvB,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAC,IAAM,CACLI,MAAM,CAACW,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC,CAACtB,GAAG,CAAC,CAC5BK,MAAM,CAACO,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC,CAAClB,GAAG,CAAC,CAC9B,CAACW,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAQ,EAAA,CAAAR,QAAA,aAEDS,OAAO,CAACC,GAAG,CAACV,QAAA,CAAAQ,EAAA,CAAMG,OAAO,CAAC,CAAC,QAE7BjC,YAAY,CAAC,KAAK,CAAC,CAAC,yBAAAsB,QAAA,CAAAY,IAAA,MAAAhB,OAAA,gBACrB,kBAjBK,CAAAL,YAAYA,CAAA,SAAAC,IAAA,CAAAqB,KAAA,MAAAC,SAAA,OAiBjB,CACDvB,YAAY,CAAC,CAAC,CACd;AACF,CAAC,CAAE,CAACN,GAAG,CAAEI,GAAG,CAAC,CAAC,CAEd,GAAM,CAAA0B,UAAU,CAAG,GAAI,CAAAnD,IAAI,CAAC,CAC1BoD,OAAO,CAAE,uDAAuD,CAChEC,QAAQ,CAAE,CAAC,EAAE,CAAE,EAAE,CACnB,CAAC,CAAC,CACF;AACA,mBACE/C,KAAA,QAAKgD,SAAS,CAAE7D,MAAM,CAAC8D,SAAU,CAAAC,QAAA,eAC/BpD,IAAA,OAAAoD,QAAA,CAAI,cAAY,CAAI,CAAC,CACpBvC,KAAK,eAAIb,IAAA,OAAAoD,QAAA,CAAI,mBAAiB,CAAI,CAAC,CACnC3C,SAAS,cACRT,IAAA,cAAW,CAAC,cAEZA,IAAA,QAAKkD,SAAS,CAAE7D,MAAM,CAACgE,GAAI,CAAAD,QAAA,cACzBlD,KAAA,CAACV,YAAY,EAAC8D,MAAM,CAAE,CAACrC,GAAG,CAAEI,GAAG,CAAE,CAACkC,IAAI,CAAE,CAAE,CAACC,eAAe,CAAE,KAAM,CAAAJ,QAAA,eAChEpD,IAAA,CAACP,SAAS,EACRgE,WAAW,CAAC,yFAAyF,CACrGC,GAAG,CAAC,oDAAoD,CACzD,CAAC,cACF1D,IAAA,CAACN,MAAM,EAACiE,QAAQ,CAAE,CAAC1C,GAAG,CAAEI,GAAG,CAAE,CAACuC,IAAI,CAAEb,UAAW,CAAAK,QAAA,cAC7CpD,IAAA,CAACL,KAAK,EAAAyD,QAAA,CAAE/C,eAAe,CAACgC,IAAI,CAAQ,CAAC,CAC/B,CAAC,EACG,CAAC,CACZ,CACN,EACE,CAAC,CAEV,CAEA,cAAe,CAAAlC,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}